# نظام طلبات السحب المرفوضة مع أسباب الرفض

## 📋 نظرة عامة

تم تطوير نظام متكامل لإدارة طلبات السحب المرفوضة مع إمكانية عرض أسباب الرفض بشكل تفاعلي في صفحة المحفظة.

## 🔧 التحديثات المنجزة

### 1. 📊 تحديث البيانات النموذجية (Mock Data)
**الملف**: `src/hooks/useWalletData.ts`

#### الطلبات المرفوضة المضافة:
- **طلب مرفوض #1**: 8,500 ريال
  - **السبب**: "الحد الأدنى للسحب لم يتم الوصول إليه. يجب أن يكون المبلغ أقل من 5000 ريال للسحب الأول."

- **طلب مرفوض #2**: 12,000 ريال  
  - **السبب**: "بيانات البنك غير مكتملة. يرجى التأكد من صحة رقم الآيبان واسم صاحب الحساب قبل إعادة المحاولة."

#### البيانات الإحصائية المضافة:
```typescript
const withdrawalStats = {
  totalRequests: 5,        // إجمالي الطلبات
  pendingRequests: 1,      // المعلقة
  completedRequests: 2,    // المكتملة  
  rejectedRequests: 2,     // المرفوضة
  totalWithdrawnAmount: 7500,   // المبلغ المسحوب
  totalPendingAmount: 1111,     // المبلغ المعلق
  totalRejectedAmount: 20500    // المبلغ المرفوض
}
```

### 2. 🎨 تطوير واجهة المستخدم
**الملف**: `src/pages/dashboard/wallet.tsx`

#### مكون بطاقة طلب السحب (WithdrawalRequestCard):
- **الحالات المدعومة**:
  - ⏳ **معلق**: لون برتقالي مع أيقونة ساعة
  - ✅ **مكتمل**: لون أخضر مع أيقونة تحقق
  - ❌ **مرفوض**: لون أحمر مع أيقونة X

#### الميزات التفاعلية:
- **زر عرض سبب الرفض**: يظهر فقط للطلبات المرفوضة
- **صندوق توضيح السبب**: قابل للطي والتوسع
- **تاريخ المعالجة**: يظهر للطلبات المكتملة والمرفوضة
- **تنسيق تفاعلي**: ألوان مختلفة حسب الحالة

### 3. 📈 قسم إحصائيات السحب
تم إضافة قسم جديد يعرض:
- **إجمالي الطلبات**: العدد الكلي لطلبات السحب
- **المعلقة**: الطلبات قيد المراجعة
- **المكتملة**: الطلبات المنجزة بنجاح  
- **المرفوضة**: الطلبات التي تم رفضها

### 4. 💰 ملخص المبالغ
تم إضافة ملخص يعرض:
- **المبلغ المسحوب**: إجمالي المبالغ المسحوبة بنجاح
- **المبلغ المعلق**: إجمالي المبالغ في انتظار المعالجة
- **المبلغ المرفوض**: إجمالي المبالغ التي تم رفض سحبها

## 🎮 كيفية الاستخدام

### للمستخدم النهائي:
1. **الوصول**: اذهب إلى صفحة **المحفظة** من لوحة التحكم
2. **العرض**: شاهد قسم "طلبات السحب" في الجانب الأيمن
3. **الطلبات المرفوضة**: ابحث عن البطاقات ذات اللون الأحمر
4. **عرض السبب**: اضغط على "عرض سبب الرفض" لمعرفة التفاصيل
5. **إخفاء السبب**: اضغط على "إخفاء السبب" لطي المحتوى

### للمطور:
```typescript
// استخدام البيانات الجديدة
const { withdrawalRequests, withdrawalStats } = useWalletData();

// فلترة الطلبات المرفوضة
const rejectedRequests = withdrawalRequests.filter(r => r.status === 'rejected');

// الطلبات التي تحتوي على سبب رفض
const requestsWithReason = rejectedRequests.filter(r => r.reason);
```

## 🎨 التصميم والألوان

### نظام الألوان:
- **معلق**: 🟠 برتقالي (`orange-50`, `orange-100`, `orange-600`)
- **مكتمل**: 🟢 أخضر (`green-50`, `green-100`, `green-600`) 
- **مرفوض**: 🔴 أحمر (`red-50`, `red-100`, `red-600`)

### الأيقونات:
- **معلق**: `Clock` - ساعة
- **مكتمل**: `CheckCircle` - علامة صح
- **مرفوض**: `X` - علامة X
- **سبب الرفض**: `AlertCircle` - تحذير

## 📱 التجاوب (Responsive)

- **الهاتف المحمول**: عرض عمودي مع شبكة 1 عمود
- **الجهاز اللوحي**: عرض شبكة 2×2 للإحصائيات
- **الكمبيوتر**: عرض جانبي مع الإحصائيات والطلبات

## 🔄 التحديثات المستقبلية

### يمكن إضافة:
1. **فلترة الطلبات**: حسب الحالة أو التاريخ
2. **البحث**: في أسباب الرفض أو المبالغ
3. **التصدير**: تصدير تقرير بالطلبات المرفوضة
4. **الإشعارات**: تنبيهات عند رفض الطلبات
5. **إعادة الطلب**: إمكانية إعادة تقديم طلب مرفوض بعد التصحيح

## 🔧 الملفات المعدلة

1. **`src/hooks/useWalletData.ts`**:
   - إضافة `SAMPLE_WITHDRAWAL_REQUESTS`
   - إضافة `withdrawalStats` calculations
   - تحديث return object

2. **`src/pages/dashboard/wallet.tsx`**:
   - إضافة `WithdrawalRequestCard` component
   - تحديث `WalletContent` component  
   - إضافة قسم إحصائيات السحب
   - تحديث imports للأيقونات الجديدة

3. **`src/types/wallet.ts`** (موجود مسبقاً):
   - `WithdrawalRequest` interface مع دعم `status: "rejected"` و `reason`

## ✅ اختبار الميزات

للتأكد من عمل الميزات:
1. ✅ عرض الطلبات المرفوضة باللون الأحمر
2. ✅ ظهور زر "عرض سبب الرفض" للطلبات المرفوضة فقط
3. ✅ إمكانية طي وتوسع صندوق السبب
4. ✅ عرض الإحصائيات الصحيحة (2 طلب مرفوض)
5. ✅ عرض المبالغ المرفوضة في الملخص (20,500 ريال)
6. ✅ التصميم المتجاوب على جميع الأجهزة

---

> 💡 **ملاحظة**: هذا التحديث يحسن تجربة المستخدم بشكل كبير من خلال توفير شفافية كاملة حول حالة طلبات السحب وأسباب الرفض.